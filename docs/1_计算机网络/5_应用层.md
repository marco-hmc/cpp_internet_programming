---
layout: post
title: ï¼ˆå…­ï¼‰è®¡ç½‘é‚£äº›äº‹å„¿ï¼šåº”ç”¨å±‚
categories: è®¡ç®—æœºç½‘ç»œ
related_posts: True
tags: network
toc:
  sidebar: right
---

## åº”ç”¨å±‚ (Application Layer) - ç½‘ç»œæœåŠ¡çš„ç›´æ¥æä¾›è€…

- ç†è§£åº”ç”¨å±‚è¦è§£å†³çš„æ ¸å¿ƒé—®é¢˜
- æŒæ¡ä¸»è¦åº”ç”¨å±‚åè®®çš„åŠŸèƒ½å’Œåº”ç”¨åœºæ™¯
- äº†è§£WebæŠ€æœ¯çš„å‘å±•å†ç¨‹å’ŒåŸç†
- è®¤è¯†èº«ä»½è®¤è¯å’Œå®‰å…¨æœºåˆ¶
- ç†è§£ç°ä»£ç½‘ç»œåº”ç”¨çš„æ¶æ„æ¨¡å¼

---

### 1. ä¸ºä»€ä¹ˆéœ€è¦åº”ç”¨å±‚ï¼Ÿè¦è§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿ

#### ğŸ¤” **ç°å®é—®é¢˜å¼•å…¥**

æƒ³è±¡æ²¡æœ‰åº”ç”¨å±‚çš„ä¸–ç•Œï¼š
- ä½ æƒ³çœ‹ç½‘é¡µï¼Œä½†åªèƒ½çœ‹åˆ°ä¸€å †äºŒè¿›åˆ¶æ•°æ®
- ä½ æƒ³å‘é‚®ä»¶ï¼Œä½†éœ€è¦æ‰‹åŠ¨ç¼–å†™å¤æ‚çš„æ•°æ®æ ¼å¼
- ä½ æƒ³ä¼ æ–‡ä»¶ï¼Œä½†ä¸çŸ¥é“å¦‚ä½•å‘Šè¯‰å¯¹æ–¹æ–‡ä»¶çš„åç§°å’Œå¤§å°
- ä½ æƒ³è®¿é—®www.google.comï¼Œä½†åªçŸ¥é“IPåœ°å€æ˜¯ä»€ä¹ˆ

**åº”ç”¨å±‚çš„ä½¿å‘½**: è®©æ™®é€šç”¨æˆ·èƒ½å¤Ÿ**ç›´è§‚ã€ä¾¿æ·**åœ°ä½¿ç”¨ç½‘ç»œæœåŠ¡

#### ğŸ“‹ **åº”ç”¨å±‚è¦è§£å†³çš„æ ¸å¿ƒé—®é¢˜**

| é—®é¢˜ | æ²¡æœ‰åº”ç”¨å±‚çš„å›°éš¾ | åº”ç”¨å±‚çš„è§£å†³æ–¹æ¡ˆ | å®é™…ä½“ç° |
|------|----------------|-----------------|----------|
| **æ•°æ®æ ¼å¼** | ä¸çŸ¥é“æ¥æ”¶åˆ°çš„æ•°æ®å«ä¹‰ | å®šä¹‰æ ‡å‡†æ ¼å¼ | HTMLã€JSONã€XML |
| **æœåŠ¡å®šä½** | ä¸çŸ¥é“å¦‚ä½•æ‰¾åˆ°æœåŠ¡ | åŸŸåå’Œç«¯å£æ ‡å‡†åŒ– | www.google.com:80 |
| **ç”¨æˆ·ç•Œé¢** | éœ€è¦è®°å¿†å¤æ‚æŒ‡ä»¤ | å›¾å½¢åŒ–ç•Œé¢ | æµè§ˆå™¨ã€é‚®ä»¶å®¢æˆ·ç«¯ |
| **èº«ä»½è®¤è¯** | æ— æ³•ç¡®è®¤ç”¨æˆ·èº«ä»½ | ç™»å½•å’Œæƒé™ç³»ç»Ÿ | ç”¨æˆ·åå¯†ç ã€Token |
| **å†…å®¹ä¼ è¾“** | ä¸çŸ¥é“æ•°æ®è¾¹ç•Œå’Œç±»å‹ | åè®®è§„èŒƒ | HTTPè¯·æ±‚å“åº” |

#### ğŸŒ **åº”ç”¨å±‚çš„è®¾è®¡ç†å¿µ**

```
åº”ç”¨å±‚ = ç½‘ç»œåŠŸèƒ½ + ç”¨æˆ·å‹å¥½ç•Œé¢

è®¾è®¡åŸåˆ™ï¼š
âœ… æ ‡å‡†åŒ– - ç»Ÿä¸€çš„åè®®æ ¼å¼ï¼Œç¡®ä¿äº’é€šæ€§
âœ… ç®€åŒ–ä½¿ç”¨ - éšè—åº•å±‚å¤æ‚æ€§ï¼Œæä¾›ç›´è§‚æ“ä½œ
âœ… åŠŸèƒ½ä¸°å¯Œ - æ”¯æŒå„ç§åº”ç”¨éœ€æ±‚
âœ… å¯æ‰©å±•æ€§ - èƒ½å¤Ÿé€‚åº”æ–°çš„åº”ç”¨åœºæ™¯
```

---

### 2. åº”ç”¨å±‚åè®®æ¦‚è§ˆ

#### ğŸ“Š **ä¸»è¦åº”ç”¨å±‚åè®®åˆ†ç±»**

##### **Webç›¸å…³åè®®**
| åè®® | ç«¯å£ | ä¼ è¾“å±‚ | ä¸»è¦åŠŸèƒ½ | å®é™…åº”ç”¨ |
|------|------|--------|----------|----------|
| **HTTP** | 80 | TCP | ç½‘é¡µä¼ è¾“ | æµè§ˆç½‘ç«™ã€APIè°ƒç”¨ |
| **HTTPS** | 443 | TCP | å®‰å…¨ç½‘é¡µä¼ è¾“ | ç½‘ä¸Šé“¶è¡Œã€è´­ç‰©ç½‘ç«™ |

##### **æ–‡ä»¶ä¼ è¾“åè®®**
| åè®® | ç«¯å£ | ä¼ è¾“å±‚ | ä¸»è¦åŠŸèƒ½ | å®é™…åº”ç”¨ |
|------|------|--------|----------|----------|
| **FTP** | 20/21 | TCP | æ–‡ä»¶ä¼ è¾“ | ç½‘ç«™éƒ¨ç½²ã€æ–‡ä»¶å…±äº« |
| **SSH** | 22 | TCP | å®‰å…¨è¿œç¨‹è®¿é—® | æœåŠ¡å™¨ç®¡ç†ã€å®‰å…¨æ–‡ä»¶ä¼ è¾“ |

##### **é‚®ä»¶åè®®**
| åè®® | ç«¯å£ | ä¼ è¾“å±‚ | ä¸»è¦åŠŸèƒ½ | å®é™…åº”ç”¨ |
|------|------|--------|----------|----------|
| **SMTP** | 25 | TCP | é‚®ä»¶å‘é€ | å‘é€é‚®ä»¶åˆ°é‚®ä»¶æœåŠ¡å™¨ |
| **POP3** | 110 | TCP | é‚®ä»¶æ¥æ”¶ | ä¸‹è½½é‚®ä»¶åˆ°æœ¬åœ° |
| **IMAP** | 143 | TCP | é‚®ä»¶ç®¡ç† | åœ¨çº¿é‚®ä»¶ç®¡ç† |

##### **åŸºç¡€æœåŠ¡åè®®**
| åè®® | ç«¯å£ | ä¼ è¾“å±‚ | ä¸»è¦åŠŸèƒ½ | å®é™…åº”ç”¨ |
|------|------|--------|----------|----------|
| **DNS** | 53 | UDP/TCP | åŸŸåè§£æ | å°†åŸŸåè½¬æ¢ä¸ºIPåœ°å€ |
| **DHCP** | 67/68 | UDP | è‡ªåŠ¨é…ç½®ç½‘ç»œ | è‡ªåŠ¨åˆ†é…IPåœ°å€ |

---

### 3. ç°ä»£Webåº”ç”¨æ¶æ„

#### ğŸ—ï¸ **ä»å•ä½“åˆ°å¾®æœåŠ¡**

##### **æ¶æ„æ¼”è¿›å†ç¨‹**
```
å•ä½“åº”ç”¨ (Monolithic)
â”œâ”€ æ‰€æœ‰åŠŸèƒ½åœ¨ä¸€ä¸ªåº”ç”¨ä¸­
â”œâ”€ ç®€å•éƒ¨ç½²ï¼Œä½†éš¾ä»¥æ‰©å±•
â””â”€ é€‚åˆå°å‹é¡¹ç›®

â†“ å‘å±•ä¸º

SOA (Service-Oriented Architecture)  
â”œâ”€ æœåŠ¡åŒ–æ€æƒ³
â”œâ”€ ä½†ä»ç„¶å¤æ‚å’Œé‡é‡çº§
â””â”€ ä¼ä¸šçº§åº”ç”¨

â†“ æ¼”è¿›ä¸º

å¾®æœåŠ¡ (Microservices)
â”œâ”€ ç‹¬ç«‹éƒ¨ç½²çš„å°æœåŠ¡
â”œâ”€ ä¸“æ³¨å•ä¸€ä¸šåŠ¡åŠŸèƒ½
â”œâ”€ æŠ€æœ¯æ ˆå¯ä»¥ä¸åŒ
â””â”€ é€‚åˆå¤§å‹åˆ†å¸ƒå¼ç³»ç»Ÿ
```

##### **RESTful APIè®¾è®¡**
```python
from flask import Flask, jsonify, request
from flask_restful import Api, Resource

app = Flask(__name__)
api = Api(app)

# æ¨¡æ‹Ÿæ•°æ®å­˜å‚¨
users = {
    1: {'id': 1, 'name': 'Alice', 'email': 'alice@example.com'},
    2: {'id': 2, 'name': 'Bob', 'email': 'bob@example.com'}
}

class UserListAPI(Resource):
    def get(self):
        """è·å–ç”¨æˆ·åˆ—è¡¨"""
        return {
            'status': 'success',
            'data': list(users.values()),
            'total': len(users)
        }
    
    def post(self):
        """åˆ›å»ºæ–°ç”¨æˆ·"""
        data = request.get_json()
        
        # ç®€å•éªŒè¯
        if not data.get('name') or not data.get('email'):
            return {'error': 'åç§°å’Œé‚®ç®±ä¸èƒ½ä¸ºç©º'}, 400
        
        # åˆ›å»ºç”¨æˆ·
        user_id = max(users.keys()) + 1 if users else 1
        new_user = {
            'id': user_id,
            'name': data['name'], 
            'email': data['email']
        }
        users[user_id] = new_user
        
        return {
            'status': 'success',
            'data': new_user
        }, 201

class UserAPI(Resource):
    def get(self, user_id):
        """è·å–ç‰¹å®šç”¨æˆ·"""
        user = users.get(user_id)
        if not user:
            return {'error': 'ç”¨æˆ·ä¸å­˜åœ¨'}, 404
        
        return {
            'status': 'success',
            'data': user
        }
    
    def put(self, user_id):
        """æ›´æ–°ç”¨æˆ·"""
        if user_id not in users:
            return {'error': 'ç”¨æˆ·ä¸å­˜åœ¨'}, 404
        
        data = request.get_json()
        users[user_id].update(data)
        
        return {
            'status': 'success',
            'data': users[user_id]
        }
    
    def delete(self, user_id):
        """åˆ é™¤ç”¨æˆ·"""
        if user_id not in users:
            return {'error': 'ç”¨æˆ·ä¸å­˜åœ¨'}, 404
        
        deleted_user = users.pop(user_id)
        return {
            'status': 'success',
            'message': f'ç”¨æˆ· {deleted_user["name"]} å·²åˆ é™¤'
        }

# æ³¨å†ŒAPIè·¯ç”±
api.add_resource(UserListAPI, '/api/users')
api.add_resource(UserAPI, '/api/users/<int:user_id>')

if __name__ == '__main__':
    app.run(debug=True)
```

#### ğŸŒ **ç°ä»£å‰ç«¯æŠ€æœ¯**

##### **SPA (Single Page Application) æ¶æ„**
```javascript
// ç°ä»£Reactåº”ç”¨ç¤ºä¾‹
import React, { useState, useEffect } from 'react';
import axios from 'axios';

function UserManagement() {
    const [users, setUsers] = useState([]);
    const [loading, setLoading] = useState(true);
    const [newUser, setNewUser] = useState({name: '', email: ''});

    // è·å–ç”¨æˆ·åˆ—è¡¨
    useEffect(() => {
        fetchUsers();
    }, []);

    const fetchUsers = async () => {
        try {
            const response = await axios.get('/api/users');
            setUsers(response.data.data);
        } catch (error) {
            console.error('è·å–ç”¨æˆ·å¤±è´¥:', error);
        } finally {
            setLoading(false);
        }
    };

    // åˆ›å»ºç”¨æˆ·
    const createUser = async (e) => {
        e.preventDefault();
        try {
            const response = await axios.post('/api/users', newUser);
            setUsers([...users, response.data.data]);
            setNewUser({name: '', email: ''});
        } catch (error) {
            alert('åˆ›å»ºç”¨æˆ·å¤±è´¥');
        }
    };

    // åˆ é™¤ç”¨æˆ·
    const deleteUser = async (userId) => {
        if (window.confirm('ç¡®å®šåˆ é™¤è¯¥ç”¨æˆ·å—ï¼Ÿ')) {
            try {
                await axios.delete(`/api/users/${userId}`);
                setUsers(users.filter(user => user.id !== userId));
            } catch (error) {
                alert('åˆ é™¤ç”¨æˆ·å¤±è´¥');
            }
        }
    };

    if (loading) return <div>åŠ è½½ä¸­...</div>;

    return (
        <div>
            <h2>ç”¨æˆ·ç®¡ç†</h2>
            
            {/* åˆ›å»ºç”¨æˆ·è¡¨å• */}
            <form onSubmit={createUser}>
                <input
                    type="text"
                    placeholder="å§“å"
                    value={newUser.name}
                    onChange={(e) => setNewUser({...newUser, name: e.target.value})}
                    required
                />
                <input
                    type="email"
                    placeholder="é‚®ç®±"
                    value={newUser.email}
                    onChange={(e) => setNewUser({...newUser, email: e.target.value})}
                    required
                />
                <button type="submit">åˆ›å»ºç”¨æˆ·</button>
            </form>

            {/* ç”¨æˆ·åˆ—è¡¨ */}
            <div>
                {users.map(user => (
                    <div key={user.id} style={{border: '1px solid #ccc', margin: '10px', padding: '10px'}}>
                        <h3>{user.name}</h3>
                        <p>é‚®ç®±: {user.email}</p>
                        <button onClick={() => deleteUser(user.id)}>åˆ é™¤</button>
                    </div>
                ))}
            </div>
        </div>
    );
}

export default UserManagement;
```

---

### ğŸ“š å­¦ä¹ æ€»ç»“

#### âœ… **æ ¸å¿ƒè¦ç‚¹å›é¡¾**

1. **é—®é¢˜å¯¼å‘ç†è§£**: åº”ç”¨å±‚è§£å†³ç”¨æˆ·å‹å¥½ä½¿ç”¨ç½‘ç»œçš„é—®é¢˜
2. **åè®®ç”Ÿæ€**: HTTPã€DNSã€é‚®ä»¶åè®®ç­‰æ„æˆå®Œæ•´çš„åº”ç”¨å±‚ç”Ÿæ€
3. **WebæŠ€æœ¯æ¼”è¿›**: ä»HTTP/1.0åˆ°HTTP/3ï¼ŒæŒç»­ä¼˜åŒ–ç”¨æˆ·ä½“éªŒ
4. **èº«ä»½è®¤è¯**: Sessionã€Tokenç­‰æœºåˆ¶ä¿æŠ¤ç½‘ç»œå®‰å…¨
5. **ç°ä»£æ¶æ„**: RESTful APIã€å¾®æœåŠ¡ã€SPAç­‰ç°ä»£Webå¼€å‘æ¨¡å¼

#### ğŸ¯ **å®è·µå»ºè®®**

1. **åŠ¨æ‰‹å®éªŒ**:
   - å®ç°ç®€å•çš„HTTPæœåŠ¡å™¨å’Œå®¢æˆ·ç«¯
   - ç¼–å†™DNSæŸ¥è¯¢ç¨‹åº
   - å¼€å‘åŒ…å«è®¤è¯çš„Webåº”ç”¨

2. **å·¥å…·æŒæ¡**:
   - Webå¼€å‘: curl, Postman, æµè§ˆå™¨å¼€å‘è€…å·¥å…·
   - ç½‘ç»œè°ƒè¯•: nslookup, dig, telnet
   - APIæµ‹è¯•: swagger, insomnia

3. **é¡¹ç›®å®è·µ**:
   - è®¾è®¡RESTful API
   - å®ç°JWTè®¤è¯ç³»ç»Ÿ
   - å¼€å‘å‰åç«¯åˆ†ç¦»åº”ç”¨

#### ğŸ” **æ·±å…¥å­¦ä¹ æ–¹å‘**

- **ç°ä»£WebæŠ€æœ¯**: GraphQLã€WebAssemblyã€PWA
- **å¾®æœåŠ¡æ¶æ„**: æœåŠ¡å‘ç°ã€é…ç½®ç®¡ç†ã€é“¾è·¯è¿½è¸ª
- **Webå®‰å…¨**: HTTPSã€CSPã€CORSç­‰å®‰å…¨æœºåˆ¶
- **æ€§èƒ½ä¼˜åŒ–**: CDNã€ç¼“å­˜ç­–ç•¥ã€è´Ÿè½½å‡è¡¡

---

> **ğŸ’¡ å­¦ä¹ æç¤º**: åº”ç”¨å±‚æ˜¯ç”¨æˆ·ç›´æ¥æ¥è§¦çš„ç½‘ç»œå±‚æ¬¡ï¼Œç†è§£å…¶è®¾è®¡æ€æƒ³å’Œå®ç°åŸç†å¯¹äºWebå¼€å‘å’Œç³»ç»Ÿæ¶æ„è®¾è®¡éƒ½éå¸¸é‡è¦ã€‚å»ºè®®é€šè¿‡å®é™…é¡¹ç›®å¼€å‘æ¥åŠ æ·±ç†è§£ï¼Œç‰¹åˆ«å…³æ³¨ç”¨æˆ·ä½“éªŒå’Œç³»ç»Ÿå®‰å…¨æ€§çš„å¹³è¡¡ã€‚

