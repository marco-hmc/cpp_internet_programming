---
layout: post
title: ï¼ˆå…­ï¼‰è®¡ç½‘é‚£äº›äº‹å„¿ï¼šåº”ç”¨å±‚-http/https
categories: è®¡ç®—æœºç½‘ç»œ
related_posts: True
tags: network
toc:
  sidebar: right
---

## HTTP/HTTPSåè®®è¯¦è§£ - Webä¸–ç•Œçš„åŸºçŸ³

- ç†è§£HTTPåè®®è¦è§£å†³çš„æ ¸å¿ƒé—®é¢˜
- æŒæ¡HTTPè¯·æ±‚å“åº”çš„åŸºæœ¬æ ¼å¼å’Œå·¥ä½œåŸç†
- äº†è§£HTTPSçš„å®‰å…¨æœºåˆ¶å’Œåº”ç”¨åœºæ™¯
- è®¤è¯†HTTPå‘å±•å†ç¨‹å’Œç°ä»£WebæŠ€æœ¯
- ç†è§£Cookieã€Sessionç­‰ä¼šè¯ç®¡ç†æœºåˆ¶

---

### 1. ä¸ºä»€ä¹ˆéœ€è¦HTTPï¼Ÿè¦è§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿ

#### ğŸ¤” **ç°å®é—®é¢˜å¼•å…¥**

æƒ³è±¡1990å¹´çš„ä¸–ç•Œï¼š
- **ä¿¡æ¯å­¤å²›**: æ¯ä¸ªè®¡ç®—æœºçš„ä¿¡æ¯éƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œæ— æ³•å…±äº«
- **å¤æ‚åè®®**: ä¸åŒç³»ç»Ÿä½¿ç”¨ä¸åŒçš„é€šä¿¡æ–¹å¼ï¼Œäº’ä¸å…¼å®¹
- **ä¸“ä¸šé—¨æ§›**: åªæœ‰æŠ€æœ¯ä¸“å®¶æ‰èƒ½è·å–ç½‘ç»œä¿¡æ¯
- **å†…å®¹å•ä¸€**: åªèƒ½ä¼ è¾“çº¯æ–‡æœ¬ï¼Œæ— æ³•å¤„ç†å›¾ç‰‡ã€è§†é¢‘ç­‰å¯Œåª’ä½“

**Tim Berners-Leeçš„æ„¿æ™¯**: åˆ›å»ºä¸€ä¸ªå…¨çƒä¿¡æ¯å…±äº«ç³»ç»Ÿ - World Wide Web

#### ğŸ“‹ **HTTPè¦è§£å†³çš„æ ¸å¿ƒé—®é¢˜**

| é—®é¢˜ | ä¼ ç»Ÿæ–¹å¼çš„å›°éš¾ | HTTPçš„è§£å†³æ–¹æ¡ˆ | å®é™…ä½“ç° |
|------|---------------|---------------|----------|
| **ä¿¡æ¯è·å–** | éœ€è¦çŸ¥é“å…·ä½“æœåŠ¡å™¨åœ°å€å’Œåè®® | ç»Ÿä¸€çš„URLå®šä½ç³»ç»Ÿ | https://www.google.com |
| **å†…å®¹äº¤æ¢** | ä¸åŒç³»ç»Ÿæ ¼å¼ä¸å…¼å®¹ | æ ‡å‡†åŒ–çš„æ•°æ®æ ¼å¼ | HTMLã€JSONã€XML |
| **ç”¨æˆ·å‹å¥½** | éœ€è¦è®°å¿†å¤æ‚å‘½ä»¤ | ç®€å•çš„è¯·æ±‚-å“åº”æ¨¡å¼ | ç‚¹å‡»é“¾æ¥å³å¯è®¿é—® |
| **å¯æ‰©å±•æ€§** | åè®®å›ºå®šï¼Œéš¾ä»¥æ‰©å±• | çµæ´»çš„å¤´éƒ¨å’Œæ–¹æ³•ç³»ç»Ÿ | æ”¯æŒå„ç§å†…å®¹ç±»å‹ |

#### ğŸŒ **HTTPçš„è®¾è®¡å“²å­¦**

```
HTTP = HyperText Transfer Protocol (è¶…æ–‡æœ¬ä¼ è¾“åè®®)

è®¾è®¡åŸåˆ™ï¼š
âœ… ç®€å•æ€§ - äººç±»å¯è¯»çš„æ–‡æœ¬åè®®
âœ… æ— çŠ¶æ€ - æ¯ä¸ªè¯·æ±‚ç‹¬ç«‹ï¼Œç®€åŒ–æœåŠ¡å™¨è®¾è®¡
âœ… å¯æ‰©å±• - æ”¯æŒæ–°çš„æ–¹æ³•å’Œå¤´éƒ¨å­—æ®µ
âœ… é€šç”¨æ€§ - ä¸ä»…é™äºHTMLï¼Œæ”¯æŒä»»ä½•å†…å®¹ç±»å‹
```

---

### 2. HTTPå·¥ä½œåŸç† - è¯·æ±‚å“åº”çš„èˆè¹ˆ

#### ğŸ“ **åŸºæœ¬äº¤äº’æ¨¡å¼**

```
ç”¨æˆ·åœ¨æµè§ˆå™¨è¾“å…¥: https://www.example.com/news

å®Œæ•´æµç¨‹ï¼š
1. DNSè§£æ: www.example.com â†’ 192.168.1.100
2. å»ºç«‹TCPè¿æ¥: ä¸‰æ¬¡æ¡æ‰‹
3. å‘é€HTTPè¯·æ±‚: GET /news HTTP/1.1
4. æœåŠ¡å™¨å¤„ç†: æŸ¥æ‰¾æ–°é—»é¡µé¢
5. è¿”å›HTTPå“åº”: 200 OK + HTMLå†…å®¹
6. æµè§ˆå™¨æ¸²æŸ“: æ˜¾ç¤ºæ–°é—»é¡µé¢
```

#### ğŸ“¦ **HTTPè¯·æ±‚æ ¼å¼è¯¦è§£**

##### **è¯·æ±‚ç¤ºä¾‹**
```http
GET /api/users/123 HTTP/1.1
Host: api.example.com
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64)
Accept: application/json
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
Content-Type: application/json
Connection: keep-alive

[è¯·æ±‚ä½“ - GETè¯·æ±‚é€šå¸¸ä¸ºç©º]
```

##### **è¯·æ±‚ç»„æˆéƒ¨åˆ†**
```
è¯·æ±‚è¡Œ: [æ–¹æ³•] [URL] [HTTPç‰ˆæœ¬]
â”œâ”€ GET: è·å–èµ„æº
â”œâ”€ POST: æäº¤æ•°æ®  
â”œâ”€ PUT: æ›´æ–°èµ„æº
â”œâ”€ DELETE: åˆ é™¤èµ„æº
â””â”€ PATCH: éƒ¨åˆ†æ›´æ–°

è¯·æ±‚å¤´: å…ƒæ•°æ®ä¿¡æ¯
â”œâ”€ Host: ç›®æ ‡æœåŠ¡å™¨
â”œâ”€ User-Agent: å®¢æˆ·ç«¯æ ‡è¯†
â”œâ”€ Accept: æ¥å—çš„å†…å®¹ç±»å‹
â”œâ”€ Authorization: è®¤è¯ä¿¡æ¯
â””â”€ Cookie: ä¼šè¯ä¿¡æ¯

è¯·æ±‚ä½“: å®é™…æ•°æ® (POST/PUTæ—¶ä½¿ç”¨)
```

#### ğŸ“¨ **HTTPå“åº”æ ¼å¼è¯¦è§£**

##### **å“åº”ç¤ºä¾‹**
```http
HTTP/1.1 200 OK
Content-Type: application/json; charset=UTF-8
Content-Length: 156
Set-Cookie: sessionid=abc123; Path=/; HttpOnly
Cache-Control: max-age=3600
Date: Mon, 23 Oct 2023 10:00:00 GMT

{
  "id": 123,
  "name": "John Doe",
  "email": "john@example.com",
  "created_at": "2023-10-23T10:00:00Z"
}
```

##### **çŠ¶æ€ç åˆ†ç±»**
```
1xx - ä¿¡æ¯æ€§å“åº” (å¤„ç†ä¸­)
â”œâ”€ 100 Continue: ç»§ç»­å‘é€è¯·æ±‚ä½“
â””â”€ 101 Switching Protocols: åè®®åˆ‡æ¢

2xx - æˆåŠŸå“åº” 
â”œâ”€ 200 OK: è¯·æ±‚æˆåŠŸ
â”œâ”€ 201 Created: èµ„æºåˆ›å»ºæˆåŠŸ
â””â”€ 204 No Content: æˆåŠŸä½†æ— å†…å®¹

3xx - é‡å®šå‘
â”œâ”€ 301 Moved Permanently: æ°¸ä¹…é‡å®šå‘
â”œâ”€ 302 Found: ä¸´æ—¶é‡å®šå‘
â””â”€ 304 Not Modified: å†…å®¹æœªä¿®æ”¹

4xx - å®¢æˆ·ç«¯é”™è¯¯
â”œâ”€ 400 Bad Request: è¯·æ±‚æ ¼å¼é”™è¯¯
â”œâ”€ 401 Unauthorized: éœ€è¦è®¤è¯
â”œâ”€ 403 Forbidden: ç¦æ­¢è®¿é—®
â””â”€ 404 Not Found: èµ„æºä¸å­˜åœ¨

5xx - æœåŠ¡å™¨é”™è¯¯
â”œâ”€ 500 Internal Server Error: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯
â””â”€ 503 Service Unavailable: æœåŠ¡ä¸å¯ç”¨
```

---

### 3. HTTPæ–¹æ³•è¯¦è§£ - ä¸åŒæ“ä½œçš„æ ‡å‡†åŒ–

#### ğŸ› ï¸ **RESTful APIè®¾è®¡å®ä¾‹**

**é—®é¢˜èƒŒæ™¯**: å¦‚ä½•è®¾è®¡ä¸€ä¸ªç”¨æˆ·ç®¡ç†ç³»ç»Ÿçš„APIï¼Ÿ

```python
# ç”¨æˆ·ç®¡ç†APIè®¾è®¡
from flask import Flask, request, jsonify

app = Flask(__name__)

# ç”¨æˆ·æ•°æ®æ¨¡æ‹Ÿ
users = {
    1: {"id": 1, "name": "Alice", "email": "alice@example.com"},
    2: {"id": 2, "name": "Bob", "email": "bob@example.com"}
}

# GET - è·å–èµ„æº
@app.route('/api/users', methods=['GET'])
def get_users():
    """è·å–æ‰€æœ‰ç”¨æˆ·åˆ—è¡¨"""
    return jsonify({
        "status": "success",
        "data": list(users.values()),
        "total": len(users)
    })

@app.route('/api/users/<int:user_id>', methods=['GET'])
def get_user(user_id):
    """è·å–ç‰¹å®šç”¨æˆ·ä¿¡æ¯"""
    if user_id not in users:
        return jsonify({"error": "ç”¨æˆ·ä¸å­˜åœ¨"}), 404
    
    return jsonify({
        "status": "success",
        "data": users[user_id]
    })

# POST - åˆ›å»ºèµ„æº
@app.route('/api/users', methods=['POST'])
def create_user():
    """åˆ›å»ºæ–°ç”¨æˆ·"""
    data = request.get_json()
    
    # éªŒè¯å¿…éœ€å­—æ®µ
    if not data.get('name') or not data.get('email'):
        return jsonify({"error": "å§“åå’Œé‚®ç®±ä¸èƒ½ä¸ºç©º"}), 400
    
    # åˆ›å»ºæ–°ç”¨æˆ·
    user_id = max(users.keys()) + 1 if users else 1
    new_user = {
        "id": user_id,
        "name": data['name'],
        "email": data['email']
    }
    users[user_id] = new_user
    
    return jsonify({
        "status": "success",
        "data": new_user
    }), 201

# PUT - å®Œæ•´æ›´æ–°èµ„æº
@app.route('/api/users/<int:user_id>', methods=['PUT'])
def update_user(user_id):
    """å®Œæ•´æ›´æ–°ç”¨æˆ·ä¿¡æ¯"""
    if user_id not in users:
        return jsonify({"error": "ç”¨æˆ·ä¸å­˜åœ¨"}), 404
    
    data = request.get_json()
    users[user_id] = {
        "id": user_id,
        "name": data.get('name', users[user_id]['name']),
        "email": data.get('email', users[user_id]['email'])
    }
    
    return jsonify({
        "status": "success",
        "data": users[user_id]
    })

# PATCH - éƒ¨åˆ†æ›´æ–°èµ„æº
@app.route('/api/users/<int:user_id>', methods=['PATCH'])
def patch_user(user_id):
    """éƒ¨åˆ†æ›´æ–°ç”¨æˆ·ä¿¡æ¯"""
    if user_id not in users:
        return jsonify({"error": "ç”¨æˆ·ä¸å­˜åœ¨"}), 404
    
    data = request.get_json()
    
    # åªæ›´æ–°æä¾›çš„å­—æ®µ
    if 'name' in data:
        users[user_id]['name'] = data['name']
    if 'email' in data:
        users[user_id]['email'] = data['email']
    
    return jsonify({
        "status": "success",
        "data": users[user_id]
    })

# DELETE - åˆ é™¤èµ„æº
@app.route('/api/users/<int:user_id>', methods=['DELETE'])
def delete_user(user_id):
    """åˆ é™¤ç”¨æˆ·"""
    if user_id not in users:
        return jsonify({"error": "ç”¨æˆ·ä¸å­˜åœ¨"}), 404
    
    deleted_user = users.pop(user_id)
    return jsonify({
        "status": "success",
        "message": f"ç”¨æˆ· {deleted_user['name']} å·²åˆ é™¤"
    })

if __name__ == '__main__':
    app.run(debug=True)
```

#### ğŸ“ **å®¢æˆ·ç«¯ä½¿ç”¨ç¤ºä¾‹**

```javascript
// ç°ä»£Webåº”ç”¨ä¸­çš„HTTPè¯·æ±‚
class UserAPI {
    constructor(baseURL) {
        this.baseURL = baseURL;
    }

    // GET - è·å–ç”¨æˆ·åˆ—è¡¨
    async getUsers() {
        try {
            const response = await fetch(`${this.baseURL}/api/users`);
            const data = await response.json();
            return data;
        } catch (error) {
            console.error('è·å–ç”¨æˆ·åˆ—è¡¨å¤±è´¥:', error);
        }
    }

    // POST - åˆ›å»ºç”¨æˆ·
    async createUser(userData) {
        try {
            const response = await fetch(`${this.baseURL}/api/users`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(userData)
            });
            
            if (!response.ok) {
                throw new Error(`HTTP ${response.status}: ${response.statusText}`);
            }
            
            return await response.json();
        } catch (error) {
            console.error('åˆ›å»ºç”¨æˆ·å¤±è´¥:', error);
        }
    }

    // PUT - æ›´æ–°ç”¨æˆ·
    async updateUser(userId, userData) {
        try {
            const response = await fetch(`${this.baseURL}/api/users/${userId}`, {
                method: 'PUT',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(userData)
            });
            
            return await response.json();
        } catch (error) {
            console.error('æ›´æ–°ç”¨æˆ·å¤±è´¥:', error);
        }
    }

    // DELETE - åˆ é™¤ç”¨æˆ·
    async deleteUser(userId) {
        try {
            const response = await fetch(`${this.baseURL}/api/users/${userId}`, {
                method: 'DELETE'
            });
            
            return await response.json();
        } catch (error) {
            console.error('åˆ é™¤ç”¨æˆ·å¤±è´¥:', error);
        }
    }
}

// ä½¿ç”¨ç¤ºä¾‹
const api = new UserAPI('http://localhost:5000');

// åˆ›å»ºç”¨æˆ·
api.createUser({
    name: 'Charlie',
    email: 'charlie@example.com'
}).then(result => {
    console.log('ç”¨æˆ·åˆ›å»ºæˆåŠŸ:', result);
});

// è·å–ç”¨æˆ·åˆ—è¡¨
api.getUsers().then(users => {
    console.log('ç”¨æˆ·åˆ—è¡¨:', users);
});
```

---

### 4. ä¼šè¯ç®¡ç† - è®©æ— çŠ¶æ€åè®®è®°ä½ç”¨æˆ·

#### ğŸª **Cookieæœºåˆ¶ - æµè§ˆå™¨çš„å°çº¸æ¡**

**è¦è§£å†³çš„é—®é¢˜**: HTTPæ˜¯æ— çŠ¶æ€çš„ï¼ŒæœåŠ¡å™¨æ— æ³•è®°ä½ç”¨æˆ·

##### **Cookieå·¥ä½œæµç¨‹**
```
é¦–æ¬¡è®¿é—®è´­ç‰©ç½‘ç«™ï¼š
1. ç”¨æˆ·è®¿é—® â†’ æœåŠ¡å™¨ä¸è®¤è¯†ç”¨æˆ·
2. æœåŠ¡å™¨å‘é€Cookie â†’ Set-Cookie: cart_id=abc123
3. æµè§ˆå™¨ä¿å­˜Cookie â†’ å­˜å‚¨åœ¨æœ¬åœ°

åç»­è®¿é—®ï¼š
1. æµè§ˆå™¨è‡ªåŠ¨å‘é€ â†’ Cookie: cart_id=abc123
2. æœåŠ¡å™¨è¯†åˆ«ç”¨æˆ· â†’ çŸ¥é“è¿™æ˜¯ä¹‹å‰çš„ç”¨æˆ·
3. åŠ è½½è´­ç‰©è½¦å†…å®¹ â†’ æ˜¾ç¤ºä¹‹å‰æ·»åŠ çš„å•†å“
```

##### **Cookieå®é™…åº”ç”¨**
```python
from flask import Flask, request, make_response, jsonify
import uuid
from datetime import datetime, timedelta

app = Flask(__name__)

# æ¨¡æ‹Ÿè´­ç‰©è½¦æ•°æ®
shopping_carts = {}

@app.route('/api/cart', methods=['GET'])
def get_cart():
    """è·å–è´­ç‰©è½¦å†…å®¹"""
    cart_id = request.cookies.get('cart_id')
    
    if not cart_id or cart_id not in shopping_carts:
        # æ–°ç”¨æˆ·ï¼Œåˆ›å»ºæ–°è´­ç‰©è½¦
        cart_id = str(uuid.uuid4())
        shopping_carts[cart_id] = []
        
        response = make_response(jsonify({
            "cart_id": cart_id,
            "items": [],
            "total": 0
        }))
        
        # è®¾ç½®Cookieï¼Œæœ‰æ•ˆæœŸ30å¤©
        response.set_cookie(
            'cart_id', 
            cart_id, 
            max_age=30*24*60*60,  # 30å¤©
            httponly=True,        # é˜²æ­¢XSSæ”»å‡»
            secure=True,          # ä»…HTTPSä¼ è¾“
            samesite='Lax'        # é˜²æ­¢CSRFæ”»å‡»
        )
        
        return response
    
    # è¿”å›ç°æœ‰è´­ç‰©è½¦
    cart_items = shopping_carts[cart_id]
    total = sum(item['price'] * item['quantity'] for item in cart_items)
    
    return jsonify({
        "cart_id": cart_id,
        "items": cart_items,
        "total": total
    })

@app.route('/api/cart/add', methods=['POST'])
def add_to_cart():
    """æ·»åŠ å•†å“åˆ°è´­ç‰©è½¦"""
    cart_id = request.cookies.get('cart_id')
    data = request.get_json()
    
    if not cart_id:
        return jsonify({"error": "æ— æ•ˆçš„è´­ç‰©è½¦"}), 400
    
    if cart_id not in shopping_carts:
        shopping_carts[cart_id] = []
    
    # æ·»åŠ å•†å“
    item = {
        "product_id": data['product_id'],
        "name": data['name'],
        "price": data['price'],
        "quantity": data.get('quantity', 1)
    }
    
    shopping_carts[cart_id].append(item)
    
    return jsonify({
        "status": "success",
        "message": "å•†å“å·²æ·»åŠ åˆ°è´­ç‰©è½¦"
    })
```

#### ğŸ« **Sessionæœºåˆ¶ - æœåŠ¡å™¨çš„è®°å¿†**

**è¦è§£å†³çš„é—®é¢˜**: Cookieå­˜å‚¨åœ¨å®¢æˆ·ç«¯ï¼Œå®‰å…¨æ€§ä¸å¤Ÿ

##### **Sessionå®ç°åŸç†**
```python
import secrets
from datetime import datetime, timedelta

class SessionManager:
    def __init__(self):
        self.sessions = {}  # å­˜å‚¨åœ¨æœåŠ¡å™¨ç«¯
        self.session_timeout = timedelta(hours=24)
    
    def create_session(self, user_id):
        """åˆ›å»ºæ–°ä¼šè¯"""
        session_id = secrets.token_hex(32)  # ç”Ÿæˆå®‰å…¨çš„éšæœºID
        
        self.sessions[session_id] = {
            'user_id': user_id,
            'created_at': datetime.now(),
            'last_accessed': datetime.now(),
            'data': {}  # å¯ä»¥å­˜å‚¨ä»»æ„ä¼šè¯æ•°æ®
        }
        
        return session_id
    
    def get_session(self, session_id):
        """è·å–ä¼šè¯æ•°æ®"""
        if session_id not in self.sessions:
            return None
        
        session = self.sessions[session_id]
        
        # æ£€æŸ¥æ˜¯å¦è¿‡æœŸ
        if datetime.now() - session['last_accessed'] > self.session_timeout:
            del self.sessions[session_id]
            return None
        
        # æ›´æ–°æœ€åè®¿é—®æ—¶é—´
        session['last_accessed'] = datetime.now()
        return session
    
    def update_session(self, session_id, data):
        """æ›´æ–°ä¼šè¯æ•°æ®"""
        if session_id in self.sessions:
            self.sessions[session_id]['data'].update(data)
    
    def destroy_session(self, session_id):
        """é”€æ¯ä¼šè¯"""
        if session_id in self.sessions:
            del self.sessions[session_id]

# Flaskåº”ç”¨ç¤ºä¾‹
session_manager = SessionManager()

@app.route('/api/login', methods=['POST'])
def login():
    """ç”¨æˆ·ç™»å½•"""
    data = request.get_json()
    username = data.get('username')
    password = data.get('password')
    
    # éªŒè¯ç”¨æˆ·åå¯†ç ï¼ˆç®€åŒ–ç¤ºä¾‹ï¼‰
    if username == 'admin' and password == 'password123':
        # åˆ›å»ºä¼šè¯
        session_id = session_manager.create_session(user_id=1)
        
        response = make_response(jsonify({
            "status": "success",
            "message": "ç™»å½•æˆåŠŸ"
        }))
        
        # è®¾ç½®Session Cookie
        response.set_cookie(
            'session_id',
            session_id,
            httponly=True,
            secure=True,
            samesite='Lax'
        )
        
        return response
    else:
        return jsonify({"error": "ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯"}), 401

@app.route('/api/profile')
def get_profile():
    """è·å–ç”¨æˆ·èµ„æ–™ï¼ˆéœ€è¦ç™»å½•ï¼‰"""
    session_id = request.cookies.get('session_id')
    session = session_manager.get_session(session_id)
    
    if not session:
        return jsonify({"error": "è¯·å…ˆç™»å½•"}), 401
    
    # è¿”å›ç”¨æˆ·èµ„æ–™
    return jsonify({
        "user_id": session['user_id'],
        "username": "admin",
        "email": "admin@example.com"
    })

@app.route('/api/logout', methods=['POST'])
def logout():
    """ç”¨æˆ·é€€å‡º"""
    session_id = request.cookies.get('session_id')
    
    if session_id:
        session_manager.destroy_session(session_id)
    
    response = make_response(jsonify({
        "status": "success",
        "message": "å·²é€€å‡ºç™»å½•"
    }))
    
    # æ¸…é™¤Cookie
    response.set_cookie('session_id', '', expires=0)
    
    return response
```

---

### 5. HTTPS - å®‰å…¨çš„HTTP

#### ğŸ”’ **ä¸ºä»€ä¹ˆéœ€è¦HTTPSï¼Ÿ**

**HTTPçš„å®‰å…¨é—®é¢˜**:
```
1. æ˜æ–‡ä¼ è¾“ â†’ å®¹æ˜“è¢«çªƒå¬
   ç”¨æˆ·å¯†ç : password123
   ç½‘ç»œç›‘å¬: é»‘å®¢å¯ä»¥çœ‹åˆ°å¯†ç 

2. æ— æ³•éªŒè¯èº«ä»½ â†’ å®¹æ˜“è¢«å†’å……  
   ç”¨æˆ·ä»¥ä¸ºè®¿é—®: www.bank.com
   å®é™…è®¿é—®çš„: www.fake-bank.com

3. æ— æ³•ä¿è¯å®Œæ•´æ€§ â†’ å®¹æ˜“è¢«ç¯¡æ”¹
   é“¶è¡Œè¿”å›: ä½™é¢ 10000 å…ƒ
   é»‘å®¢ä¿®æ”¹: ä½™é¢ 0 å…ƒ
```

#### ğŸ›¡ï¸ **HTTPSè§£å†³æ–¹æ¡ˆ**

##### **HTTPS = HTTP + SSL/TLS**

```
HTTPSå·¥ä½œåŸç†ï¼š
1. åŠ å¯†ä¼ è¾“ â†’ ä½¿ç”¨å¯¹ç§°åŠ å¯†ä¿æŠ¤æ•°æ®
2. èº«ä»½éªŒè¯ â†’ ä½¿ç”¨æ•°å­—è¯ä¹¦éªŒè¯æœåŠ¡å™¨èº«ä»½  
3. å®Œæ•´æ€§æ£€æŸ¥ â†’ ä½¿ç”¨å“ˆå¸Œç®—æ³•é˜²æ­¢ç¯¡æ”¹
```

##### **HTTPSæ¡æ‰‹è¿‡ç¨‹**
```
å®¢æˆ·ç«¯                           æœåŠ¡å™¨
   â”‚                               â”‚
   â”œâ”€ 1. Client Hello â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚ "æˆ‘æ”¯æŒè¿™äº›åŠ å¯†ç®—æ³•"
   â”‚                               â”‚
   â”‚â†â”€ 2. Server Hello â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ "æˆ‘é€‰æ‹©è¿™ä¸ªç®—æ³•ï¼Œè¿™æ˜¯æˆ‘çš„è¯ä¹¦"
   â”‚   Certificate                 â”‚
   â”‚   Server Hello Done           â”‚
   â”‚                               â”‚
   â”œâ”€ 3. Client Key Exchange â”€â”€â”€â”€â”€â†’â”‚ "è¿™æ˜¯é¢„ä¸»å¯†é’¥ï¼ˆç”¨æœåŠ¡å™¨å…¬é’¥åŠ å¯†ï¼‰"
   â”‚   Change Cipher Spec          â”‚
   â”‚   Finished                    â”‚
   â”‚                               â”‚
   â”‚â†â”€ 4. Change Cipher Spec â”€â”€â”€â”€â”€â”€â”¤ "å¼€å§‹ä½¿ç”¨åŠ å¯†é€šä¿¡"
   â”‚   Finished                    â”‚
   â”‚                               â”‚
   å¼€å§‹åŠ å¯†çš„HTTPé€šä¿¡
```

##### **æ•°å­—è¯ä¹¦éªŒè¯**
```python
# ç®€åŒ–çš„è¯ä¹¦éªŒè¯è¿‡ç¨‹
import hashlib
import base64
from cryptography.hazmat.primitives import hashes
from cryptography.hazmat.primitives.asymmetric import rsa, padding

class CertificateValidator:
    def __init__(self, ca_public_key):
        self.ca_public_key = ca_public_key  # CAçš„å…¬é’¥
    
    def verify_certificate(self, certificate):
        """éªŒè¯æ•°å­—è¯ä¹¦"""
        try:
            # 1. æå–è¯ä¹¦ä¿¡æ¯
            cert_info = certificate['info']  # ç½‘ç«™ä¿¡æ¯
            cert_signature = certificate['signature']  # CAçš„æ•°å­—ç­¾å
            
            # 2. è®¡ç®—è¯ä¹¦ä¿¡æ¯çš„å“ˆå¸Œå€¼
            cert_hash = hashlib.sha256(cert_info.encode()).digest()
            
            # 3. ä½¿ç”¨CAå…¬é’¥éªŒè¯ç­¾å
            self.ca_public_key.verify(
                cert_signature,
                cert_hash,
                padding.PSS(
                    mgf=padding.MGF1(hashes.SHA256()),
                    salt_length=padding.PSS.MAX_LENGTH
                ),
                hashes.SHA256()
            )
            
            # 4. æ£€æŸ¥è¯ä¹¦æœ‰æ•ˆæœŸ
            if not self._check_validity(certificate):
                return False
            
            # 5. æ£€æŸ¥åŸŸååŒ¹é…
            if not self._check_domain(certificate):
                return False
            
            return True
            
        except Exception as e:
            print(f"è¯ä¹¦éªŒè¯å¤±è´¥: {e}")
            return False
    
    def _check_validity(self, certificate):
        """æ£€æŸ¥è¯ä¹¦æœ‰æ•ˆæœŸ"""
        from datetime import datetime
        
        not_before = certificate['not_before']
        not_after = certificate['not_after']
        now = datetime.now()
        
        return not_before <= now <= not_after
    
    def _check_domain(self, certificate):
        """æ£€æŸ¥åŸŸååŒ¹é…"""
        cert_domain = certificate['domain']
        current_domain = "www.example.com"  # å½“å‰è®¿é—®çš„åŸŸå
        
        return cert_domain == current_domain
```

#### ğŸ” **ç°ä»£Webå®‰å…¨å®è·µ**

##### **å®‰å…¨å¤´éƒ¨è®¾ç½®**
```python
from flask import Flask, make_response

app = Flask(__name__)

@app.after_request
def add_security_headers(response):
    """æ·»åŠ å®‰å…¨å¤´éƒ¨"""
    
    # å¼ºåˆ¶HTTPS
    response.headers['Strict-Transport-Security'] = 'max-age=31536000; includeSubDomains'
    
    # é˜²æ­¢ç‚¹å‡»åŠ«æŒ
    response.headers['X-Frame-Options'] = 'DENY'
    
    # é˜²æ­¢MIMEç±»å‹å—…æ¢
    response.headers['X-Content-Type-Options'] = 'nosniff'
    
    # XSSä¿æŠ¤
    response.headers['X-XSS-Protection'] = '1; mode=block'
    
    # å†…å®¹å®‰å…¨ç­–ç•¥
    response.headers['Content-Security-Policy'] = "default-src 'self'; script-src 'self'"
    
    # å¼•ç”¨è€…ç­–ç•¥
    response.headers['Referrer-Policy'] = 'strict-origin-when-cross-origin'
    
    return response

@app.route('/api/secure-data')
def secure_data():
    """å®‰å…¨çš„APIç«¯ç‚¹"""
    # æ£€æŸ¥æ˜¯å¦ä½¿ç”¨HTTPS
    if not request.is_secure:
        return jsonify({"error": "å¿…é¡»ä½¿ç”¨HTTPSè®¿é—®"}), 400
    
    return jsonify({
        "sensitive_data": "è¿™æ˜¯æ•æ„Ÿä¿¡æ¯",
        "user_id": 123
    })
```

---

### 6. HTTPå‘å±•å†ç¨‹ - æ€§èƒ½ä¼˜åŒ–çš„å†å²

#### ğŸ“ˆ **ä»HTTP/1.0åˆ°HTTP/3çš„æ¼”è¿›**

##### **HTTP/1.0çš„é—®é¢˜**
```
é—®é¢˜ï¼šæ¯ä¸ªè¯·æ±‚éƒ½éœ€è¦æ–°å»ºTCPè¿æ¥

ç½‘é¡µåŠ è½½è¿‡ç¨‹ï¼š
1. è·å–HTML â†’ å»ºç«‹è¿æ¥ â†’ ä¼ è¾“ â†’ æ–­å¼€è¿æ¥
2. è·å–CSS â†’ å»ºç«‹è¿æ¥ â†’ ä¼ è¾“ â†’ æ–­å¼€è¿æ¥  
3. è·å–JS â†’ å»ºç«‹è¿æ¥ â†’ ä¼ è¾“ â†’ æ–­å¼€è¿æ¥
4. è·å–å›¾ç‰‡ â†’ å»ºç«‹è¿æ¥ â†’ ä¼ è¾“ â†’ æ–­å¼€è¿æ¥

é—®é¢˜ï¼š
- å¤§é‡çš„TCPæ¡æ‰‹å¼€é”€
- æ…¢å¯åŠ¨é‡å¤æ‰§è¡Œ
- æœåŠ¡å™¨èµ„æºæµªè´¹
```

##### **HTTP/1.1çš„æ”¹è¿›**
```python
# HTTP/1.1æŒä¹…è¿æ¥ç¤ºä¾‹
import socket
import time

class HTTP11Client:
    def __init__(self, host, port=80):
        self.host = host
        self.port = port
        self.socket = None
    
    def connect(self):
        """å»ºç«‹æŒä¹…è¿æ¥"""
        self.socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
        self.socket.connect((self.host, self.port))
    
    def request(self, method, path, headers=None, body=None):
        """å‘é€HTTPè¯·æ±‚ï¼ˆå¤ç”¨è¿æ¥ï¼‰"""
        if not self.socket:
            self.connect()
        
        # æ„é€ è¯·æ±‚
        request_line = f"{method} {path} HTTP/1.1\r\n"
        headers = headers or {}
        headers['Host'] = self.host
        headers['Connection'] = 'keep-alive'  # ä¿æŒè¿æ¥
        
        header_lines = ''.join(f"{k}: {v}\r\n" for k, v in headers.items())
        request = f"{request_line}{header_lines}\r\n"
        
        if body:
            request += body
        
        # å‘é€è¯·æ±‚
        self.socket.send(request.encode())
        
        # æ¥æ”¶å“åº”
        response = self.socket.recv(4096).decode()
        return response
    
    def close(self):
        """å…³é—­è¿æ¥"""
        if self.socket:
            self.socket.close()

# ä½¿ç”¨ç¤ºä¾‹ï¼šä¸€ä¸ªè¿æ¥è·å–å¤šä¸ªèµ„æº
client = HTTP11Client('www.example.com')

# å¤ç”¨åŒä¸€ä¸ªTCPè¿æ¥
html = client.request('GET', '/index.html')
css = client.request('GET', '/style.css')
js = client.request('GET', '/script.js')

client.close()
```

##### **HTTP/2çš„é©å‘½æ€§æ”¹è¿›**
```
HTTP/2è§£å†³çš„é—®é¢˜ï¼š
1. é˜Ÿå¤´é˜»å¡ â†’ å¤šè·¯å¤ç”¨
2. å¤´éƒ¨å†—ä½™ â†’ HPACKå‹ç¼©
3. æ— æ³•æ¨é€ â†’ æœåŠ¡å™¨æ¨é€

å¤šè·¯å¤ç”¨ç¤ºä¾‹ï¼š
ä¼ ç»ŸHTTP/1.1:
è¯·æ±‚1 â”€â”€â†’ å“åº”1 â”€â”€â†’ è¯·æ±‚2 â”€â”€â†’ å“åº”2 (ä¸²è¡Œ)

HTTP/2:
è¯·æ±‚1 â”€â”€â†’ â”
è¯·æ±‚2 â”€â”€â†’ â”œâ”€ å¹¶è¡Œä¼ è¾“ â”€â†’ å“åº”1+å“åº”2 (å¹¶è¡Œ)
è¯·æ±‚3 â”€â”€â†’ â”˜
```

##### **HTTP/3çš„æœªæ¥**
```
HTTP/3 = HTTP/2 + QUIC(UDP)

ä¼˜åŠ¿ï¼š
âœ… 0-RTTè¿æ¥å»ºç«‹
âœ… è¿æ¥è¿ç§»ï¼ˆWiFiåˆ‡æ¢åˆ°4Gæ— éœ€é‡è¿ï¼‰
âœ… æ›´å¥½çš„æ‹¥å¡æ§åˆ¶
âœ… å†…ç½®åŠ å¯†
```

---

### 7. å®é™…åº”ç”¨æ¡ˆä¾‹åˆ†æ

#### ğŸ›’ **ç”µå•†ç½‘ç«™çš„HTTPåº”ç”¨**

##### **ç”¨æˆ·è´­ç‰©æµç¨‹**
```javascript
// ç°ä»£ç”µå•†ç½‘ç«™çš„HTTPäº¤äº’
class ECommerceApp {
    constructor() {
        this.baseURL = 'https://api.shop.com';
        this.authToken = localStorage.getItem('auth_token');
    }

    // 1. ç”¨æˆ·ç™»å½•
    async login(username, password) {
        const response = await fetch(`${this.baseURL}/auth/login`, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({ username, password })
        });

        if (response.ok) {
            const data = await response.json();
            this.authToken = data.token;
            localStorage.setItem('auth_token', this.authToken);
            return data;
        }
        throw new Error('ç™»å½•å¤±è´¥');
    }

    // 2. æµè§ˆå•†å“
    async getProducts(category = null, page = 1) {
        const params = new URLSearchParams({
            page: page,
            limit: 20
        });
        
        if (category) {
            params.append('category', category);
        }

        const response = await fetch(`${this.baseURL}/products?${params}`);
        return await response.json();
    }

    // 3. æ·»åŠ åˆ°è´­ç‰©è½¦
    async addToCart(productId, quantity = 1) {
        const response = await fetch(`${this.baseURL}/cart/add`, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'Authorization': `Bearer ${this.authToken}`
            },
            body: JSON.stringify({ productId, quantity })
        });

        return await response.json();
    }

    // 4. ç»“ç®—ä¸‹å•
    async checkout(orderData) {
        const response = await fetch(`${this.baseURL}/orders`, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'Authorization': `Bearer ${this.authToken}`
            },
            body: JSON.stringify(orderData)
        });

        if (response.status === 201) {
            return await response.json();
        }
        throw new Error('ä¸‹å•å¤±è´¥');
    }

    // 5. æ”¯ä»˜å¤„ç†
    async processPayment(orderId, paymentInfo) {
        const response = await fetch(`${this.baseURL}/payments`, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'Authorization': `Bearer ${this.authToken}`
            },
            body: JSON.stringify({
                orderId,
                ...paymentInfo
            })
        });

        return await response.json();
    }
}

// ä½¿ç”¨ç¤ºä¾‹
const app = new ECommerceApp();

// å®Œæ•´çš„è´­ç‰©æµç¨‹
async function completePurchase() {
    try {
        // 1. ç™»å½•
        await app.login('user@example.com', 'password123');
        
        // 2. æµè§ˆå•†å“
        const products = await app.getProducts('electronics');
        console.log('å•†å“åˆ—è¡¨:', products);
        
        // 3. æ·»åŠ å•†å“åˆ°è´­ç‰©è½¦
        await app.addToCart(products.data[0].id, 2);
        
        // 4. ä¸‹å•
        const order = await app.checkout({
            shippingAddress: 'åŒ—äº¬å¸‚æœé˜³åŒº...',
            paymentMethod: 'credit_card'
        });
        
        // 5. æ”¯ä»˜
        const payment = await app.processPayment(order.id, {
            cardNumber: '4111111111111111',
            expiryDate: '12/25',
            cvv: '123'
        });
        
        console.log('è´­ä¹°æˆåŠŸ:', payment);
        
    } catch (error) {
        console.error('è´­ä¹°è¿‡ç¨‹å‡ºé”™:', error);
    }
}
```

#### ğŸ“± **ç§»åŠ¨åº”ç”¨çš„HTTPä¼˜åŒ–**

```javascript
// ç§»åŠ¨åº”ç”¨HTTPä¼˜åŒ–ç­–ç•¥
class MobileHTTPClient {
    constructor() {
        this.cache = new Map();
        this.requestQueue = [];
        this.isOnline = navigator.onLine;
        
        // ç›‘å¬ç½‘ç»œçŠ¶æ€
        window.addEventListener('online', () => {
            this.isOnline = true;
            this.flushQueue();
        });
        
        window.addEventListener('offline', () => {
            this.isOnline = false;
        });
    }

    // 1. è¯·æ±‚ç¼“å­˜
    async cachedRequest(url, options = {}) {
        const cacheKey = `${url}:${JSON.stringify(options)}`;
        
        // æ£€æŸ¥ç¼“å­˜
        if (this.cache.has(cacheKey)) {
            const cached = this.cache.get(cacheKey);
            if (Date.now() - cached.timestamp < 5 * 60 * 1000) { // 5åˆ†é’Ÿæœ‰æ•ˆ
                return cached.data;
            }
        }

        // å‘é€è¯·æ±‚
        const response = await fetch(url, options);
        const data = await response.json();
        
        // ç¼“å­˜ç»“æœ
        this.cache.set(cacheKey, {
            data,
            timestamp: Date.now()
        });
        
        return data;
    }

    // 2. è¯·æ±‚é˜Ÿåˆ—ï¼ˆç¦»çº¿æ”¯æŒï¼‰
    async queuedRequest(url, options = {}) {
        if (!this.isOnline) {
            // ç¦»çº¿æ—¶åŠ å…¥é˜Ÿåˆ—
            this.requestQueue.push({ url, options });
            return { queued: true };
        }

        return await fetch(url, options);
    }

    // 3. åˆ·æ–°é˜Ÿåˆ—
    async flushQueue() {
        while (this.requestQueue.length > 0) {
            const { url, options } = this.requestQueue.shift();
            try {
                await fetch(url, options);
            } catch (error) {
                console.error('é˜Ÿåˆ—è¯·æ±‚å¤±è´¥:', error);
                // é‡æ–°åŠ å…¥é˜Ÿåˆ—
                this.requestQueue.unshift({ url, options });
                break;
            }
        }
    }

    // 4. æ‰¹é‡è¯·æ±‚
    async batchRequests(requests) {
        const promises = requests.map(({ url, options }) => 
            fetch(url, options).then(res => res.json())
        );
        
        return await Promise.allSettled(promises);
    }

    // 5. å›¾ç‰‡æ‡’åŠ è½½
    setupLazyLoading() {
        const images = document.querySelectorAll('img[data-src]');
        
        const imageObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const img = entry.target;
                    img.src = img.dataset.src;
                    img.removeAttribute('data-src');
                    imageObserver.unobserve(img);
                }
            });
        });

        images.forEach(img => imageObserver.observe(img));
    }
}
```

---

### ğŸ“š å­¦ä¹ æ€»ç»“

#### âœ… **æ ¸å¿ƒè¦ç‚¹å›é¡¾**

1. **é—®é¢˜å¯¼å‘ç†è§£**: HTTPè§£å†³å…¨çƒä¿¡æ¯å…±äº«çš„æ ‡å‡†åŒ–é—®é¢˜
2. **åè®®æœºåˆ¶**: è¯·æ±‚-å“åº”æ¨¡å¼çš„è®¾è®¡å“²å­¦å’Œå®ç°ç»†èŠ‚
3. **ä¼šè¯ç®¡ç†**: Cookieå’ŒSessionè§£å†³æ— çŠ¶æ€åè®®çš„çŠ¶æ€ä¿æŒé—®é¢˜
4. **å®‰å…¨å‡çº§**: HTTPSé€šè¿‡åŠ å¯†å’Œè®¤è¯ä¿æŠ¤Webé€šä¿¡å®‰å…¨
5. **æ€§èƒ½æ¼”è¿›**: HTTPåè®®ç‰ˆæœ¬å‡çº§æŒç»­ä¼˜åŒ–Webæ€§èƒ½

#### ğŸ¯ **å®è·µå»ºè®®**

1. **åŠ¨æ‰‹å®éªŒ**:
   - ä½¿ç”¨curlå‘½ä»¤è¡Œå·¥å…·ç»ƒä¹ HTTPè¯·æ±‚
   - å¼€å‘ç®€å•çš„RESTful API
   - å®ç°Cookieå’ŒSessionæœºåˆ¶

2. **å·¥å…·æŒæ¡**:
   - æµè§ˆå™¨å¼€å‘è€…å·¥å…·ç½‘ç»œé¢æ¿
   - Postmanæˆ–Insomnia APIæµ‹è¯•å·¥å…·
   - Charlesæˆ–Wiresharkç½‘ç»œæŠ“åŒ…

3. **é¡¹ç›®å®è·µ**:
   - å¼€å‘å®Œæ•´çš„å‰åç«¯åˆ†ç¦»åº”ç”¨
   - å®ç°ç”¨æˆ·è®¤è¯å’Œæˆæƒç³»ç»Ÿ
   - ä¼˜åŒ–Webåº”ç”¨æ€§èƒ½

#### ğŸ” **æ·±å…¥å­¦ä¹ æ–¹å‘**

- **ç°ä»£WebæŠ€æœ¯**: GraphQLã€WebSocketã€Server-Sent Events
- **Webå®‰å…¨**: CORSã€CSPã€JWTç­‰å®‰å…¨æœºåˆ¶
- **æ€§èƒ½ä¼˜åŒ–**: HTTP/2ã€HTTP/3ã€CDNã€ç¼“å­˜ç­–ç•¥
- **å¾®æœåŠ¡æ¶æ„**: APIç½‘å…³ã€æœåŠ¡å‘ç°ã€è´Ÿè½½å‡è¡¡

---

> **ğŸ’¡ å­¦ä¹ æç¤º**: HTTP/HTTPSæ˜¯Webå¼€å‘çš„åŸºç¡€ï¼Œç†è§£å…¶å·¥ä½œåŸç†å¯¹äºå‰ç«¯å¼€å‘ã€åç«¯å¼€å‘å’Œç³»ç»Ÿæ¶æ„è®¾è®¡éƒ½è‡³å…³é‡è¦ã€‚å»ºè®®é€šè¿‡å®é™…é¡¹ç›®å¼€å‘æ¥åŠ æ·±ç†è§£ï¼Œç‰¹åˆ«å…³æ³¨ç”¨æˆ·ä½“éªŒå’Œç³»ç»Ÿå®‰å…¨æ€§çš„å¹³è¡¡ã€‚è®°ä½ï¼Œæ¯ä¸ªHTTPçŠ¶æ€ç ã€æ¯ä¸ªå¤´éƒ¨å­—æ®µéƒ½æœ‰å…¶å­˜åœ¨çš„æ„ä¹‰å’Œåº”ç”¨åœºæ™¯ã€‚
