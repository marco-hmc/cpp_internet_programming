---
layout: post
title: ï¼ˆä¸ƒï¼‰è®¡ç½‘é‚£äº›äº‹å„¿ï¼šç½‘ç»œå®‰å…¨
categories: è®¡ç®—æœºç½‘ç»œ
related_posts: True
tags: network
toc:
  sidebar: right
---

## ç½‘ç»œå®‰å…¨ - å®ˆæŠ¤æ•°å­—ä¸–ç•Œçš„ç›¾ç‰Œ

- ç†è§£ç½‘ç»œå®‰å…¨é¢ä¸´çš„ä¸»è¦å¨èƒå’ŒæŒ‘æˆ˜
- æŒæ¡å¸¸è§ç½‘ç»œæ”»å‡»çš„åŸç†å’Œé˜²æŠ¤æ–¹æ³•
- äº†è§£ç½‘ç»œå®‰å…¨åœ¨å®é™…åº”ç”¨ä¸­çš„é‡è¦æ€§
- è®¤è¯†ç°ä»£ç½‘ç»œå®‰å…¨é˜²æŠ¤æŠ€æœ¯å’Œæœ€ä½³å®è·µ
- åŸ¹å…»ç½‘ç»œå®‰å…¨æ„è¯†å’Œé˜²èŒƒèƒ½åŠ›

---

### 1. ä¸ºä»€ä¹ˆéœ€è¦ç½‘ç»œå®‰å…¨ï¼Ÿè¦è§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿ

#### ğŸ¤” **ç°å®é—®é¢˜å¼•å…¥**

æƒ³è±¡æ²¡æœ‰ç½‘ç»œå®‰å…¨ä¿æŠ¤çš„ä¸–ç•Œï¼š
- **ä¸ªäººéšç§æ³„éœ²**: é“¶è¡Œè´¦æˆ·ã€èº«ä»½ä¿¡æ¯è¢«ç›—ç”¨
- **ä¼ä¸šæ•°æ®è¢«çªƒ**: å•†ä¸šæœºå¯†ã€å®¢æˆ·ä¿¡æ¯ä¸¢å¤±
- **æœåŠ¡ä¸­æ–­**: ç½‘ç«™æ— æ³•è®¿é—®ï¼Œåœ¨çº¿æœåŠ¡ç˜«ç—ª
- **ç»æµæŸå¤±**: ç½‘ç»œè¯ˆéª—ã€å‹’ç´¢è½¯ä»¶é€ æˆå·¨å¤§æŸå¤±

**ç½‘ç»œå®‰å…¨çš„ä½¿å‘½**: ä¿æŠ¤ç½‘ç»œç©ºé—´ä¸­çš„æ•°æ®ã€ç³»ç»Ÿå’ŒæœåŠ¡å…å—å„ç§å¨èƒ

#### ğŸ“‹ **ç½‘ç»œå®‰å…¨è¦è§£å†³çš„æ ¸å¿ƒé—®é¢˜**

| å¨èƒç±»å‹ | æ²¡æœ‰é˜²æŠ¤çš„åæœ | å®‰å…¨ç›®æ ‡ | é˜²æŠ¤æªæ–½ |
|----------|---------------|----------|----------|
| **æ•°æ®æ³„éœ²** | éšç§ä¿¡æ¯è¢«ç›—ç”¨ | æœºå¯†æ€§ (Confidentiality) | åŠ å¯†ã€è®¿é—®æ§åˆ¶ |
| **æ•°æ®ç¯¡æ”¹** | ä¿¡æ¯è¢«æ¶æ„ä¿®æ”¹ | å®Œæ•´æ€§ (Integrity) | æ•°å­—ç­¾åã€å“ˆå¸Œæ ¡éªŒ |
| **æœåŠ¡ä¸­æ–­** | ç³»ç»Ÿæ— æ³•æ­£å¸¸è¿è¡Œ | å¯ç”¨æ€§ (Availability) | å¤‡ä»½ã€è´Ÿè½½å‡è¡¡ |
| **èº«ä»½å†’å……** | éæ³•ç”¨æˆ·è·å¾—æƒé™ | è®¤è¯æ€§ (Authentication) | èº«ä»½éªŒè¯ã€æˆæƒ |

#### ğŸ›¡ï¸ **ç½‘ç»œå®‰å…¨çš„åŸºæœ¬åŸåˆ™**

```
CIAä¸‰å…ƒç»„ - ä¿¡æ¯å®‰å…¨çš„æ ¸å¿ƒç›®æ ‡:

C - Confidentiality (æœºå¯†æ€§)
â”œâ”€ ç¡®ä¿ä¿¡æ¯åªè¢«æˆæƒäººå‘˜è®¿é—®
â”œâ”€ é˜²æ­¢æ•æ„Ÿæ•°æ®æ³„éœ²
â””â”€ å®ç°: åŠ å¯†ã€è®¿é—®æ§åˆ¶

I - Integrity (å®Œæ•´æ€§)  
â”œâ”€ ç¡®ä¿ä¿¡æ¯çš„å‡†ç¡®æ€§å’Œå®Œæ•´æ€§
â”œâ”€ é˜²æ­¢æ•°æ®è¢«æœªæˆæƒä¿®æ”¹
â””â”€ å®ç°: æ•°å­—ç­¾åã€å“ˆå¸Œæ ¡éªŒ

A - Availability (å¯ç”¨æ€§)
â”œâ”€ ç¡®ä¿ç³»ç»Ÿå’ŒæœåŠ¡æ­£å¸¸è¿è¡Œ
â”œâ”€ é˜²æ­¢æœåŠ¡ä¸­æ–­å’Œæ‹’ç»æœåŠ¡
â””â”€ å®ç°: å†—ä½™å¤‡ä»½ã€ç›‘æ§é¢„è­¦
```

---

### 2. DNSæ”»å‡»ä¸é˜²æŠ¤ - äº’è”ç½‘åŸºç¡€è®¾æ–½çš„å®‰å…¨

#### ğŸ¯ **DNSæ”»å‡»è¦è§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿ**

**æ”»å‡»è€…ç›®æ ‡**: æ§åˆ¶æˆ–ç ´ååŸŸåè§£ææœåŠ¡ï¼Œé‡å®šå‘ç”¨æˆ·æµé‡æˆ–é€ æˆæœåŠ¡ä¸­æ–­

##### **2.1 DNSæ´ªæ°´æ”»å‡» (DNS Flood)**

**é—®é¢˜èƒŒæ™¯**: DNSæœåŠ¡å™¨æ˜¯äº’è”ç½‘çš„"ç”µè¯ç°¿"ï¼Œä¸€æ—¦ç˜«ç—ªä¼šå½±å“å¤§é‡ç”¨æˆ·

**æ”»å‡»åŸç†**:
- æ”»å‡»è€…ç”Ÿæˆå¤§é‡éšæœºåŸŸå(å¦‚ abc123.fake.com)
- å‘DNSæœåŠ¡å™¨å‘èµ·è§£æè¯·æ±‚
- DNSæœåŠ¡å™¨éœ€è¦é€’å½’æŸ¥è¯¢ï¼Œæ¶ˆè€—å¤§é‡èµ„æº
- æœ€ç»ˆå¯¼è‡´DNSæœåŠ¡å™¨è¿‡è½½å´©æºƒ

**ç°å®æ¡ˆä¾‹**: 2016å¹´Dyn DNSæ”»å‡»äº‹ä»¶ï¼Œå¯¼è‡´Twitterã€Netflixç­‰å¤§é‡ç½‘ç«™æ— æ³•è®¿é—®

**é˜²æŠ¤æªæ–½**:
```
1. é€Ÿç‡é™åˆ¶
   - æ¯IPæ¯ç§’æœ€å¤š10æ¬¡DNSæŸ¥è¯¢
   - è¶…è¿‡é™åˆ¶è‡ªåŠ¨ä¸´æ—¶å°ç¦

2. æŸ¥è¯¢åˆ†çº§å¤„ç†
   - çƒ­é—¨åŸŸåä¼˜å…ˆå¤„ç†
   - éšæœºåŸŸåé™ä½ä¼˜å…ˆçº§
   - ç¼“å­˜å¸¸ç”¨è§£æç»“æœ

3. åˆ†å¸ƒå¼éƒ¨ç½²
   - å¤šä¸ªDNSæœåŠ¡å™¨è´Ÿè½½å‡è¡¡
   - ä»»æ’­(Anycast)æŠ€æœ¯åˆ†æ•£æµé‡
   - å°±è¿‘æœåŠ¡å‡å°‘å»¶è¿Ÿ
```

##### **2.2 DNSåŠ«æŒæ”»å‡»**

**é—®é¢˜èƒŒæ™¯**: ç”¨æˆ·ä¾èµ–DNSè§£æè®¿é—®ç½‘ç«™ï¼ŒåŠ«æŒDNSå¯é‡å®šå‘åˆ°æ¶æ„ç½‘ç«™

**æ”»å‡»åœºæ™¯**:
```
æ­£å¸¸è®¿é—®: ç”¨æˆ·è¾“å…¥bank.com â†’ DNSè§£æ â†’ é“¶è¡ŒçœŸå®IP â†’ å®‰å…¨è®¿é—®
åŠ«æŒæ”»å‡»: ç”¨æˆ·è¾“å…¥bank.com â†’ æ¶æ„DNS â†’ é’“é±¼ç½‘ç«™IP â†’ è´¦æˆ·è¢«ç›—
```

**æ”»å‡»æ–¹å¼**:
1. **æœ¬åœ°åŠ«æŒ**: æ¶æ„è½¯ä»¶ä¿®æ”¹hostsæ–‡ä»¶æˆ–æœ¬åœ°DNSè®¾ç½®
2. **è·¯ç”±å™¨åŠ«æŒ**: æ”»å‡»å®¶ç”¨è·¯ç”±å™¨ï¼Œä¿®æ”¹DNSé…ç½®
3. **ISPåŠ«æŒ**: è¿è¥å•†å±‚é¢çš„DNSé‡å®šå‘(é€šå¸¸ç”¨äºå¹¿å‘Š)

**é˜²æŠ¤æªæ–½**:
```
1. ä½¿ç”¨å®‰å…¨DNSæœåŠ¡
   - Google DNS: 8.8.8.8, 8.8.4.4
   - Cloudflare DNS: 1.1.1.1, 1.0.0.1
   - æ”¯æŒDoH/DoTåŠ å¯†ä¼ è¾“

2. å¯ç”¨DNSSECéªŒè¯
   - æ•°å­—ç­¾åéªŒè¯DNSå“åº”
   - é˜²æ­¢DNSæ•°æ®è¢«ç¯¡æ”¹
   - æµè§ˆå™¨æˆ–ç³»ç»Ÿå±‚é¢å¯ç”¨

3. å®šæœŸå®‰å…¨æ£€æŸ¥
   - æ£€æŸ¥hostsæ–‡ä»¶æ˜¯å¦è¢«ç¯¡æ”¹
   - éªŒè¯è·¯ç”±å™¨DNSè®¾ç½®
   - ä½¿ç”¨å®‰å…¨è½¯ä»¶æ‰«æ
```

---

### 3. DDoSæ”»å‡»ä¸é˜²æŠ¤ - æ•°å­—æ—¶ä»£çš„"äººæµ·æˆ˜æœ¯"

**æ”»å‡»è€…ç›®æ ‡**: é€šè¿‡æµ·é‡æ— æ•ˆè¯·æ±‚è€—å°½ç›®æ ‡æœåŠ¡å™¨èµ„æºï¼Œä½¿å…¶æ— æ³•ä¸ºæ­£å¸¸ç”¨æˆ·æä¾›æœåŠ¡

#### 3.1 DDoSæ”»å‡»æ¼”è¿›å†ç¨‹

**ç¬¬ä¸€ä»£: å¸¦å®½æ¶ˆè€—æ”»å‡»**
```
æ”»å‡»æ–¹å¼: å¤§é‡æ•°æ®åŒ…å¡«æ»¡ç½‘ç»œå¸¦å®½
é˜²æŠ¤æ–¹æ³•: å¢åŠ å¸¦å®½ï¼Œä½†æˆæœ¬æé«˜
é—®é¢˜: æ”»å‡»è€…å¸¦å®½ > ç›®æ ‡å¸¦å®½å³å¯æˆåŠŸ
```

**ç¬¬äºŒä»£: åƒµå°¸ç½‘ç»œæ”»å‡»**
```
æ”»å‡»æ–¹å¼: æ§åˆ¶å¤§é‡æ„ŸæŸ“ä¸»æœºå‘èµ·æ”»å‡»
ç‰¹ç‚¹: åˆ†å¸ƒå¼ï¼ŒIPåœ°å€å¤šæ ·åŒ–ï¼Œéš¾ä»¥é˜²èŒƒ
è§„æ¨¡: æ•°ä¸‡åˆ°æ•°ç™¾ä¸‡å°åƒµå°¸ä¸»æœº
```

**ç¬¬ä¸‰ä»£: æ”¾å¤§æ”»å‡»**
```
æ”»å‡»æ–¹å¼: åˆ©ç”¨åè®®ç¼ºé™·æ”¾å¤§æ”»å‡»æµé‡
å…¸å‹ä¾‹å­: NTPæ”¾å¤§(æ”¾å¤§å€æ•°600å€)
åŸç†: å°è¯·æ±‚ â†’ å¤§å“åº” â†’ ç›®æ ‡è¢«æ·¹æ²¡
```

#### 3.2 ç°å®æ”»å‡»æ¡ˆä¾‹åˆ†æ

**æ¡ˆä¾‹1: 2016å¹´Dyn DNSæ”»å‡»**
- æ”»å‡»è§„æ¨¡: 1.2 Tbps
- å½±å“èŒƒå›´: Twitterã€Netflixã€PayPalç­‰å¤§é‡ç½‘ç«™
- æ”»å‡»æ–¹å¼: ç‰©è”ç½‘è®¾å¤‡ç»„æˆçš„åƒµå°¸ç½‘ç»œ
- æŸå¤±: æ•°åƒä¸‡ç¾å…ƒç»æµæŸå¤±

**æ¡ˆä¾‹2: GitHub 2018å¹´æ”»å‡»**
- æ”»å‡»è§„æ¨¡: 1.35 Tbps
- æ”»å‡»æ–¹å¼: Memcachedæ”¾å¤§æ”»å‡»
- æŒç»­æ—¶é—´: çº¦20åˆ†é’Ÿ
- é˜²æŠ¤: å¿«é€Ÿå¯åŠ¨DDoSé˜²æŠ¤æœåŠ¡

#### 3.3 DDoSé˜²æŠ¤ç­–ç•¥

**å¤šå±‚é˜²æŠ¤ä½“ç³»**:
```
1. è¾¹ç¼˜é˜²æŠ¤å±‚
   æŠ€æœ¯: CDNã€Anycastã€è¾¹ç¼˜è®¡ç®—
   ä½œç”¨: åˆ†æ•£æ”»å‡»æµé‡ï¼Œå°±è¿‘å¤„ç†
   ä¼˜åŠ¿: å…¨çƒåˆ†å¸ƒï¼Œå¤„ç†èƒ½åŠ›å¼º

2. ç½‘ç»œå±‚é˜²æŠ¤
   æŠ€æœ¯: é»‘æ´è·¯ç”±ã€æµé‡æ¸…æ´—ã€å¸¦å®½æ‰©å®¹
   ä½œç”¨: ç½‘ç»œå±‚é¢æ‹¦æˆªæ¶æ„æµé‡
   ä¼˜åŠ¿: å¤„ç†å¤§è§„æ¨¡æµé‡æ”»å‡»

3. åº”ç”¨å±‚é˜²æŠ¤
   æŠ€æœ¯: WAFã€é€Ÿç‡é™åˆ¶ã€è¡Œä¸ºåˆ†æ
   ä½œç”¨: è¯†åˆ«åº”ç”¨å±‚æ”»å‡»æ¨¡å¼
   ä¼˜åŠ¿: ç²¾å‡†è¯†åˆ«ï¼Œè¯¯æ€ç‡ä½

4. ä¸šåŠ¡é€»è¾‘é˜²æŠ¤
   æŠ€æœ¯: éªŒè¯ç ã€ç”¨æˆ·ç”»åƒã€ä¸šåŠ¡é™æµ
   ä½œç”¨: ä¿æŠ¤æ ¸å¿ƒä¸šåŠ¡åŠŸèƒ½
   ä¼˜åŠ¿: é’ˆå¯¹æ€§å¼ºï¼Œç”¨æˆ·ä½“éªŒå¥½
```

**é˜²æŠ¤æˆæœ¬åˆ†æ**:
| é˜²æŠ¤ç­‰çº§ | å¤„ç†èƒ½åŠ› | æœˆåº¦è´¹ç”¨ | é€‚ç”¨åœºæ™¯ |
|----------|----------|----------|----------|
| åŸºç¡€é˜²æŠ¤ | 1-5 Gbps | 1åƒ-5åƒå…ƒ | å°å‹ç½‘ç«™ |
| æ ‡å‡†é˜²æŠ¤ | 10-50 Gbps | 1ä¸‡-5ä¸‡å…ƒ | ä¸­å‹ä¼ä¸š |
| é«˜çº§é˜²æŠ¤ | 100-500 Gbps | 10ä¸‡-50ä¸‡å…ƒ | å¤§å‹ä¼ä¸š |
| é¡¶çº§é˜²æŠ¤ | 1+ Tbps | 100ä¸‡+å…ƒ | å…³é”®åŸºç¡€è®¾æ–½ |

---

### 4. ä¸­é—´äººæ”»å‡»ä¸HTTPSé˜²æŠ¤ - é€šä¿¡å®‰å…¨çš„å®ˆæŠ¤è€…

**æ”»å‡»è€…ç›®æ ‡**: æ‹¦æˆªã€ç›‘å¬æˆ–ç¯¡æ”¹å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ä¹‹é—´çš„é€šä¿¡ï¼Œçªƒå–æ•æ„Ÿä¿¡æ¯

#### 4.1 ä¸­é—´äººæ”»å‡»åŸç†

**æ­£å¸¸HTTPSé€šä¿¡**:
```
å®¢æˆ·ç«¯ â†â†’ [åŠ å¯†é€šé“] â†â†’ æœåŠ¡å™¨
æ•°æ®è¢«ç«¯åˆ°ç«¯åŠ å¯†ï¼Œç¬¬ä¸‰æ–¹æ— æ³•è§£è¯»
```

**ä¸­é—´äººæ”»å‡»è¿‡ç¨‹**:
```
æ­¥éª¤1: å®¢æˆ·ç«¯è¯·æ±‚ â†’ æ”»å‡»è€…æ‹¦æˆª â†’ è½¬å‘ç»™æœåŠ¡å™¨
æ­¥éª¤2: æœåŠ¡å™¨è¯ä¹¦ â†’ æ”»å‡»è€…æ›¿æ¢ä¸ºå‡è¯ä¹¦ â†’ å‘ç»™å®¢æˆ·ç«¯  
æ­¥éª¤3: å®¢æˆ·ç«¯æ¥å—å‡è¯ä¹¦(å¦‚æœä¸éªŒè¯)
æ­¥éª¤4: æ”»å‡»è€…å»ºç«‹åŒé‡åŠ å¯†é€šé“
æ­¥éª¤5: æ”»å‡»è€…å¯è§£å¯†ã€ç›‘å¬ã€ç¯¡æ”¹æ‰€æœ‰æ•°æ®
```

#### 4.2 å¸¸è§æ”»å‡»åœºæ™¯

**å…¬å…±WiFiæ”»å‡»**:
```
åœºæ™¯: å’–å•¡åº—ã€æœºåœºå…è´¹WiFi
æ–¹æ³•: æ”»å‡»è€…æ¶è®¾å‡WiFiçƒ­ç‚¹
ç›®æ ‡: çªƒå–ç”¨æˆ·ç™»å½•å‡­æ®ã€é“¶è¡Œä¿¡æ¯
é˜²æŠ¤: ä½¿ç”¨VPNã€é¿å…æ•æ„Ÿæ“ä½œ
```

**ARPæ¬ºéª—æ”»å‡»**:
```
åœºæ™¯: å±€åŸŸç½‘ç¯å¢ƒ
æ–¹æ³•: ä¼ªé€ ç½‘å…³MACåœ°å€
ç›®æ ‡: æˆä¸ºå±€åŸŸç½‘æµé‡çš„ä¸­è½¬ç‚¹
é˜²æŠ¤: é™æ€ARPç»‘å®šã€ç½‘ç»œç›‘æ§
```

#### 4.3 HTTPSé˜²æŠ¤æœºåˆ¶

**æ•°å­—è¯ä¹¦éªŒè¯**:
```
1. è¯ä¹¦é¢å‘æœºæ„(CA)éªŒè¯
   - æ£€æŸ¥è¯ä¹¦æ˜¯å¦ç”±å¯ä¿¡CAç­¾å‘
   - éªŒè¯è¯ä¹¦é“¾çš„å®Œæ•´æ€§
   - ç¡®è®¤CAçš„æ•°å­—ç­¾å

2. è¯ä¹¦å†…å®¹éªŒè¯
   - åŸŸååŒ¹é…æ£€æŸ¥
   - è¯ä¹¦æœ‰æ•ˆæœŸéªŒè¯
   - åŠé”€çŠ¶æ€æ£€æŸ¥(CRL/OCSP)

3. å…¬é’¥éªŒè¯
   - ä½¿ç”¨CAå…¬é’¥éªŒè¯æœåŠ¡å™¨è¯ä¹¦
   - ç¡®ä¿å…¬é’¥æœªè¢«ç¯¡æ”¹
   - å»ºç«‹å®‰å…¨çš„å¯†é’¥äº¤æ¢
```

**ç°ä»£HTTPSå¢å¼ºæŠ€æœ¯**:
```
1. HTTPä¸¥æ ¼ä¼ è¾“å®‰å…¨(HSTS)
   ä½œç”¨: å¼ºåˆ¶æµè§ˆå™¨ä½¿ç”¨HTTPS
   é˜²æŠ¤: é˜²æ­¢åè®®é™çº§æ”»å‡»
   é…ç½®: Strict-Transport-Securityå¤´éƒ¨

2. è¯ä¹¦é€æ˜åº¦(CT)
   ä½œç”¨: å…¬å¼€è®°å½•æ‰€æœ‰é¢å‘çš„è¯ä¹¦
   é˜²æŠ¤: å¿«é€Ÿå‘ç°ä¼ªé€ è¯ä¹¦
   æœºåˆ¶: CTæ—¥å¿—å…¬å¼€å®¡è®¡

3. è¯ä¹¦å›ºå®š(Certificate Pinning)
   ä½œç”¨: åº”ç”¨å†…ç½®é¢„æœŸè¯ä¹¦ä¿¡æ¯
   é˜²æŠ¤: æ£€æµ‹è¯ä¹¦æ›¿æ¢æ”»å‡»
   å®ç°: ç§»åŠ¨åº”ç”¨ã€æ¡Œé¢è½¯ä»¶

4. DNS-based Authentication(CAA)
   ä½œç”¨: DNSè®°å½•æŒ‡å®šæˆæƒCA
   é˜²æŠ¤: é™åˆ¶è¯ä¹¦é¢å‘æœºæ„
   é…ç½®: CAA DNSè®°å½•
```

---

### 5. SQLæ³¨å…¥æ”»å‡»ä¸é˜²æŠ¤ - æ•°æ®åº“å®‰å…¨çš„åŸºçŸ³

**æ”»å‡»è€…ç›®æ ‡**: é€šè¿‡æ¶æ„SQLä»£ç ç»•è¿‡åº”ç”¨ç¨‹åºå®‰å…¨æ§åˆ¶ï¼Œéæ³•è®¿é—®æˆ–æ“ä½œæ•°æ®åº“

#### 5.1 SQLæ³¨å…¥æ”»å‡»ç±»å‹

**è”åˆæŸ¥è¯¢æ³¨å…¥**:
```sql
-- æ­£å¸¸æŸ¥è¯¢
SELECT * FROM users WHERE id = 1

-- æ”»å‡»è¾“å…¥: 1 UNION SELECT username,password FROM admin
-- æœ€ç»ˆæŸ¥è¯¢
SELECT * FROM users WHERE id = 1 UNION SELECT username,password FROM admin
-- ç»“æœ: æ³„éœ²ç®¡ç†å‘˜è´¦æˆ·ä¿¡æ¯
```

**å¸ƒå°”ç›²æ³¨**:
```sql
-- æ”»å‡»è€…é€ä¸ªçŒœæµ‹æ•°æ®åº“ä¿¡æ¯
-- è¾“å…¥: 1 AND LENGTH(database()) = 8
-- æ ¹æ®é¡µé¢å“åº”åˆ¤æ–­æ•°æ®åº“åé•¿åº¦
-- é€å­—ç¬¦çŒœæµ‹: 1 AND SUBSTR(database(),1,1) = 'u'
```

**æ—¶é—´ç›²æ³¨**:
```sql
-- åˆ©ç”¨å»¶æ—¶å‡½æ•°åˆ¤æ–­æ¡ä»¶çœŸå‡
-- è¾“å…¥: 1 AND IF(LENGTH(user())=4, SLEEP(5), 0)
-- å¦‚æœç”¨æˆ·åé•¿åº¦ä¸º4ï¼Œé¡µé¢å»¶è¿Ÿ5ç§’å“åº”
```

#### 5.2 ç°å®æ”»å‡»æ¡ˆä¾‹

**æ¡ˆä¾‹1: æŸå¤§å­¦æ•™åŠ¡ç³»ç»Ÿ**
- æ¼æ´: å­¦å·æŸ¥è¯¢åŠŸèƒ½æœªè¿‡æ»¤è¾“å…¥
- æ”»å‡»: é€šè¿‡UNIONæ³¨å…¥è·å–æ‰€æœ‰å­¦ç”Ÿä¿¡æ¯
- å½±å“: æ•°ä¸‡å­¦ç”Ÿä¸ªäººä¿¡æ¯æ³„éœ²
- æ•™è®­: å³ä½¿å†…éƒ¨ç³»ç»Ÿä¹Ÿéœ€è¦å®‰å…¨é˜²æŠ¤

**æ¡ˆä¾‹2: æŸç”µå•†ç½‘ç«™**
- æ¼æ´: å•†å“æœç´¢åŠŸèƒ½å­˜åœ¨æ³¨å…¥ç‚¹
- æ”»å‡»: è·å–ç”¨æˆ·è´­ä¹°è®°å½•å’Œæ”¯ä»˜ä¿¡æ¯
- æŸå¤±: æ³•å¾‹è¯‰è®¼ã€å“ç‰Œå£°èª‰å—æŸ
- ä¿®å¤: å…¨é¢ä»£ç å®¡è®¡å’Œé‡æ„

#### 5.3 SQLæ³¨å…¥é˜²æŠ¤æœ€ä½³å®è·µ

**å‚æ•°åŒ–æŸ¥è¯¢(é¦–é€‰æ–¹æ¡ˆ)**:
```java
// é”™è¯¯å†™æ³• - ç›´æ¥æ‹¼æ¥SQL
String sql = "SELECT * FROM users WHERE username = '" + username + "'";

// æ­£ç¡®å†™æ³• - å‚æ•°åŒ–æŸ¥è¯¢
String sql = "SELECT * FROM users WHERE username = ?";
PreparedStatement stmt = connection.prepareStatement(sql);
stmt.setString(1, username);
ResultSet rs = stmt.executeQuery();
```

**è¾“å…¥éªŒè¯å’Œè¿‡æ»¤**:
```python
import re

def validate_input(user_input):
    # ç™½åå•éªŒè¯: åªå…è®¸å­—æ¯æ•°å­—ä¸‹åˆ’çº¿
    if not re.match(r'^[a-zA-Z0-9_]{1,20}$', user_input):
        return False
    
    # é»‘åå•è¿‡æ»¤: ç¦æ­¢SQLå…³é”®å­—
    sql_keywords = ['SELECT', 'UNION', 'DROP', 'DELETE', 'INSERT', 
                   'UPDATE', '--', ';', 'xp_', 'sp_']
    
    for keyword in sql_keywords:
        if keyword.upper() in user_input.upper():
            return False
    
    return True
```

**æœ€å°æƒé™åŸåˆ™**:
```sql
-- ä¸ºåº”ç”¨åˆ›å»ºä¸“ç”¨æ•°æ®åº“ç”¨æˆ·
CREATE USER 'webapp'@'localhost' IDENTIFIED BY 'strong_password';

-- åªæˆäºˆå¿…è¦æƒé™
GRANT SELECT, INSERT, UPDATE ON website.users TO 'webapp'@'localhost';
GRANT SELECT ON website.products TO 'webapp'@'localhost';

-- ç¦æ­¢å±é™©æƒé™
-- ä¸æˆäºˆ DROP, ALTER, CREATE, DELETE ç­‰ç®¡ç†æƒé™
```

**Webåº”ç”¨é˜²ç«å¢™(WAF)**:
```
éƒ¨ç½²ä½ç½®: åœ¨WebæœåŠ¡å™¨å‰ç«¯
æ£€æµ‹æ–¹å¼: æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…æ”»å‡»æ¨¡å¼
æ‹¦æˆªç­–ç•¥: 
  - æ£€æµ‹SQLæ³¨å…¥ç‰¹å¾
  - é˜»æ­¢å¼‚å¸¸è¯·æ±‚
  - è®°å½•æ”»å‡»æ—¥å¿—
  - å®æ—¶å‘Šè­¦é€šçŸ¥

å¸¸è§WAFäº§å“:
  - äº‘WAF: é˜¿é‡Œäº‘ã€è…¾è®¯äº‘ã€AWS WAF
  - ç¡¬ä»¶WAF: F5ã€Fortinet
  - å¼€æºWAF: ModSecurity
```

---

### 6. SYNæ´ªæ³›æ”»å‡»ä¸é˜²æŠ¤ - TCPåè®®çš„å®‰å…¨è€ƒéªŒ

**æ”»å‡»è€…ç›®æ ‡**: åˆ©ç”¨TCPä¸‰æ¬¡æ¡æ‰‹æœºåˆ¶ç¼ºé™·ï¼Œè€—å°½æœåŠ¡å™¨è¿æ¥èµ„æºï¼Œé˜»æ­¢æ­£å¸¸ç”¨æˆ·å»ºç«‹è¿æ¥

#### 6.1 TCPä¸‰æ¬¡æ¡æ‰‹å›é¡¾

**æ­£å¸¸è¿æ¥å»ºç«‹**:
```
å®¢æˆ·ç«¯                    æœåŠ¡å™¨
   |                         |
   |--- SYN(seq=100) ------->|  ç¬¬ä¸€æ¬¡æ¡æ‰‹
   |                         |  æœåŠ¡å™¨åˆ†é…èµ„æº
   |<-- SYN-ACK(seq=200) ----|  ç¬¬äºŒæ¬¡æ¡æ‰‹
   |                         |
   |--- ACK(ack=201) ------->|  ç¬¬ä¸‰æ¬¡æ¡æ‰‹
   |                         |  è¿æ¥å»ºç«‹æˆåŠŸ
```

**SYNæ´ªæ³›æ”»å‡»è¿‡ç¨‹**:
```
æ”»å‡»è€…                    æœåŠ¡å™¨
   |                         |
   |--- SYN(ä¼ªé€ IP) -------->|  æœåŠ¡å™¨åˆ†é…èµ„æºç­‰å¾…
   |                         |  
   |--- SYN(ä¼ªé€ IP) -------->|  ç»§ç»­åˆ†é…èµ„æº
   |                         |
   |--- SYN(ä¼ªé€ IP) -------->|  èµ„æºé€æ¸è€—å°½
   |                         |
   X (ä¸å›å¤ACK)            |  åŠè¿æ¥çŠ¶æ€å †ç§¯
                             |  æ­£å¸¸è¿æ¥è¢«æ‹’ç»
```

#### 6.2 æ”»å‡»æ£€æµ‹ä¸è¯†åˆ«

**æ£€æµ‹æ–¹æ³•**:
```bash
# Linuxç³»ç»Ÿæ£€æµ‹åŠè¿æ¥çŠ¶æ€
netstat -an | grep SYN_RECV | wc -l

# æŸ¥çœ‹å…·ä½“çš„åŠè¿æ¥
netstat -an | grep SYN_RECV

# ç»Ÿè®¡æ¥æºIP
netstat -an | grep SYN_RECV | awk '{print $5}' | cut -d: -f1 | sort | uniq -c | sort -nr
```

**æ”»å‡»ç‰¹å¾**:
- å¤§é‡SYN_RECVçŠ¶æ€è¿æ¥
- æºIPåœ°å€éšæœºåˆ†å¸ƒ
- è¿æ¥å»ºç«‹å¤±è´¥ç‡å¼‚å¸¸é«˜
- æœåŠ¡å™¨å“åº”ç¼“æ…¢æˆ–æ‹’ç»æœåŠ¡

#### 6.3 SYNæ´ªæ³›é˜²æŠ¤æŠ€æœ¯

**SYN CookiesæŠ€æœ¯(æ ¸å¿ƒé˜²æŠ¤)**:
```
å·¥ä½œåŸç†:
1. æœåŠ¡å™¨æ”¶åˆ°SYNåŒ…æ—¶ä¸åˆ†é…èµ„æº
2. ä½¿ç”¨ç®—æ³•ç”ŸæˆCookieä½œä¸ºåˆå§‹åºåˆ—å·
3. åœ¨SYN-ACKä¸­å‘é€Cookie
4. æ”¶åˆ°ACKæ—¶éªŒè¯Cookie
5. éªŒè¯é€šè¿‡æ‰åˆ†é…çœŸæ­£çš„è¿æ¥èµ„æº

ä¼˜åŠ¿:
âœ… æ— éœ€ä¸ºSYNè¯·æ±‚åˆ†é…å†…å­˜
âœ… å¯ä»¥å¤„ç†æµ·é‡SYNæ”»å‡»  
âœ… å¯¹æ­£å¸¸è¿æ¥é€æ˜
âœ… å‡ ä¹æ— æ€§èƒ½æŸè€—
```

**ç³»ç»Ÿå‚æ•°ä¼˜åŒ–**:
```bash
# Linuxç³»ç»Ÿä¼˜åŒ–
# å¯ç”¨SYN Cookies
echo 1 > /proc/sys/net/ipv4/tcp_syncookies

# å‡å°‘SYN-ACKé‡ä¼ æ¬¡æ•°
echo 1 > /proc/sys/net/ipv4/tcp_synack_retries

# ç¼©çŸ­SYNè¶…æ—¶æ—¶é—´
echo 1 > /proc/sys/net/ipv4/tcp_syn_retries

# å¢å¤§SYNé˜Ÿåˆ—
echo 2048 > /proc/sys/net/ipv4/tcp_max_syn_backlog

# å¢å¤§è¿æ¥é˜Ÿåˆ—
echo 2048 > /proc/sys/net/core/somaxconn
```

**é˜²ç«å¢™è§„åˆ™**:
```bash
# iptablesé˜²æŠ¤è§„åˆ™
# é™åˆ¶æ¯IPçš„SYNåŒ…é€Ÿç‡
iptables -A INPUT -p tcp --syn -m limit --limit 1/s --limit-burst 3 -j ACCEPT
iptables -A INPUT -p tcp --syn -j DROP

# é™åˆ¶æ¯IPçš„è¿æ¥æ•°
iptables -A INPUT -p tcp --syn -m connlimit --connlimit-above 10 -j DROP

# é˜»æ­¢æ¥æºIPä¼ªé€ 
iptables -A INPUT -s 10.0.0.0/8 -i eth0 -j DROP
iptables -A INPUT -s 192.168.0.0/16 -i eth0 -j DROP
```
